# GitHub Pages デプロイ要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
岩手イベントナビゲーター GitHub Pages デプロイメント

### 1.2 目的
- 岩手イベントナビゲーターWebアプリケーションをGitHub Pagesで公開
- 継続的インテグレーション・デプロイメント（CI/CD）の実装
- ユーザーが簡単にアクセス可能な公開環境の提供

### 1.3 スコープ
- GitHub Pages環境での静的サイトホスティング
- GitHub Actionsによる自動ビルド・デプロイ
- 環境変数とAPIキーの適切な管理
- 本番環境での動作確認とテスト

## 2. 現状分析

### 2.1 技術スタック
- **フロントエンド**: React 19.1.1 + TypeScript
- **ビルドツール**: Vite 6.2.0
- **スタイリング**: Tailwind CSS 4.1.11
- **地図表示**: Leaflet + React-Leaflet
- **状態管理**: Zustand
- **AI機能**: Google Gemini AI API

### 2.2 現在の構成
- Single Page Application (SPA)
- クライアントサイドレンダリング
- 外部API（Gemini AI）への依存

### 2.3 課題
- 環境変数（GEMINI_API_KEY）の管理
- GitHub Pages での SPA ルーティング対応
- ビルド最適化とパフォーマンス
- HTTPS/SSL対応

## 3. 要件定義

### 3.1 機能要件

#### 3.1.1 必須機能
- [x] Reactアプリケーションの正常なビルド
- [x] GitHub Pages での静的サイト配信
- [x] GitHub Actions による自動デプロイ
- [ ] 環境変数の適切な管理
- [ ] 地図機能の正常動作
- [ ] AI検索機能の動作（APIキー設定後）

#### 3.1.2 推奨機能
- [ ] カスタムドメインの設定対応
- [ ] PWA対応（Service Worker）
- [ ] SEO対応（meta tags, sitemap）
- [ ] アナリティクス導入

### 3.2 非機能要件

#### 3.2.1 性能要件
- ページロード時間: 3秒以内
- First Contentful Paint: 1.5秒以内
- Largest Contentful Paint: 2.5秒以内
- バンドルサイズ: 1MB以下

#### 3.2.2 可用性要件
- GitHub Pages 稼働率: 99.9%以上
- ダウンタイム: 月間1時間以内
- デプロイ成功率: 95%以上

#### 3.2.3 セキュリティ要件
- HTTPS通信の強制
- APIキーの環境変数による管理
- Cross-Origin Resource Sharing (CORS) 対応
- Content Security Policy (CSP) 設定

#### 3.2.4 互換性要件
- モダンブラウザ対応（Chrome, Firefox, Safari, Edge）
- モバイルデバイス対応（レスポンシブデザイン）
- アクセシビリティ対応（WCAG 2.1 AA準拠）

## 4. 技術要件

### 4.1 GitHub Pages 設定
- **ソース**: GitHub Actions workflow
- **カスタムドメイン**: 必要に応じて設定
- **HTTPS**: 強制有効化

### 4.2 GitHub Actions 仕様
```yaml
# 主要設定項目
trigger: push to main branch
node_version: 18
build_command: npm run build
artifact_path: ./dist
deploy_target: github-pages
```

### 4.3 Vite 設定最適化
- Base URL設定（GitHub Pages用）
- 本番環境用ビルド最適化
- チャンクサイズ制限
- Source map生成

### 4.4 環境変数管理
- GitHub Secrets での APIキー管理
- ビルド時の環境変数注入
- 本番/開発環境の分離

## 5. 制約事項

### 5.1 GitHub Pages 制約
- 静的サイトのみサポート
- サーバーサイド処理不可
- ファイルサイズ制限（1GB）
- 月間帯域幅制限（100GB）

### 5.2 技術的制約
- SPA ルーティングは404.htmlで対応
- 環境変数はビルド時のみ利用可能
- バックエンドAPIは外部サービス利用必須

### 5.3 運用制約
- デプロイはGitHubリポジトリ経由のみ
- 即座のロールバック機能なし
- リアルタイム監視機能限定

## 6. リスク評価

### 6.1 高リスク
- **APIキー漏洩**: 環境変数管理の不備
- **ビルド失敗**: 依存関係の問題
- **パフォーマンス低下**: バンドルサイズ増大

### 6.2 中リスク
- **ブラウザ互換性**: 新機能の利用
- **地図表示問題**: Leafletの設定
- **検索機能停止**: Gemini API制限

### 6.3 低リスク
- **GitHub Pages停止**: 稀な事象
- **ドメイン問題**: 設定の複雑さ
- **SSL証明書**: 自動更新

## 7. 成功基準

### 7.1 技術的成功基準
- [x] アプリケーションが正常にビルドされる
- [ ] GitHub Pages でアクセス可能
- [ ] 全機能が正常に動作する
- [ ] モバイル対応が完了している
- [ ] パフォーマンス要件を満たしている

### 7.2 運用的成功基準
- [ ] デプロイプロセスが自動化されている
- [ ] 監視・ログ収集が設定されている
- [ ] ドキュメントが整備されている
- [ ] 問題発生時の対応手順が明確化されている

## 8. 次期フェーズ

### 8.1 フェーズ2: 機能拡張
- PWA化（オフライン対応）
- プッシュ通知機能
- ユーザー設定保存機能

### 8.2 フェーズ3: 運用改善
- カスタムドメイン設定
- CDN導入検討
- パフォーマンス最適化

---

**文書作成日**: 2024年8月13日  
**作成者**: システム開発チーム  
**承認者**: プロジェクトマネージャー  
**次回レビュー予定**: デプロイ完了後1週間以内